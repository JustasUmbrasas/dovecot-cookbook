# Generated by Chef

# Authentication via dict backend. Included from 10-auth.conf.
#
# <doc/wiki/AuthDatabase.Dict.txt>

<% if Gem::Version.new(node['dovecot']['version']) < Gem::Version.new('2.1.9') -%>
# Not supported until 2.1.9
<% else %>
<%   if Dovecot::Auth.has_passdb?(@auth['dict']) -%>
<%=    Dovecot::Conf.authdb('dict', 'passdb', @auth['dict']['passdb']) %>
<%   else -%>
passdb {
  driver = dict

  # Path for dict configuration file, see
  # example-config/dovecot-dict-auth.conf.ext
  args = /etc/dovecot/dovecot-dict-auth.conf.ext
}
<%   end -%>

<%   if Dovecot::Auth.has_userdb?(@auth['dict']) -%>
<%=    Dovecot::Conf.authdb('dict', 'userdb', @auth['dict']['userdb']) %>
<%   else -%>
userdb {
  driver = dict
  args = /etc/dovecot/dovecot-dict-auth.conf.ext
}
<%   end -%>
<% end -%>
